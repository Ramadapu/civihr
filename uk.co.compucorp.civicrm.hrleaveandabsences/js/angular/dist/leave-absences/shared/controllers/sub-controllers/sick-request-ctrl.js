define(["common/lodash","leave-absences/shared/modules/controllers","leave-absences/shared/controllers/request-ctrl","leave-absences/shared/models/instances/sickness-request-instance"],function(e,n){n.controller("SicknessRequestCtrl",["$controller","$log","$q","$uibModalInstance","api.optionGroup","directiveOptions","SicknessRequestInstance",function(n,s,t,i,c,r,u){function a(){return c.valuesOf("hrleaveandabsences_leave_request_required_document").then(function(e){d.sicknessDocumentTypes=e})}function o(){return c.valuesOf("hrleaveandabsences_sickness_reason").then(function(n){d.sicknessReasons=e.indexBy(n,"name")})}s.debug("SicknessRequestCtrl");var l=n("RequestCtrl"),d=Object.create(l);return d.directiveOptions=r,d.$modalInstance=i,d.initParams={absenceType:{is_sick:!0}},d.canSubmit=function(){return l.canSubmit.call(this)&&!!d.request.sickness_reason},d.isDocumentInRequest=function(n){return!!e.find(d.sicknessDocumentTypes,function(e){return e.value==n})},d.isChecked=function(n){var s=d.request.getDocumentArray();return!!e.find(s,function(e){return e==n})},d._initRequest=function(){var e=d._initRequestAttributes();d.request=u.init(e)},function(){d.loading.absenceTypes=!0,d._init().then(function(){return t.all([a(),o()])}).finally(function(){d.loading.absenceTypes=!1})}(),d}])});