define("access-rights/controllers/access-rights.controller",["common/angular"],function(e){"use strict";function t(t,s){function i(){s.open({appendTo:e.element("[data-contact-actions-modals-container]"),controller:"AccessRightsModalController",controllerAs:"modalCtrl",bindToController:!0,templateUrl:CRM.vars.contactAccessRights.baseURL+"/views/access-rights-modal.html"})}this.openModal=i}return t.$inject=["$rootElement","$uibModal"],{AccessRightsController:t}}),define("access-rights/controllers/access-rights-modal.controller",["common/lodash"],function(e){"use strict";function t(t,s,i,n,c){function o(){s.dismiss("cancel")}function r(s){var i=l.originalData[s],n=l.selectedData[s],o=i.map(function(e){return e.entity_id}),r=e.difference(n,o),a=e.difference(o,n).map(function(t){return e.find(i,function(e){return e.entity_id===t}).id}),u=[];return r.length>0&&u.push(c["save"+e.capitalize(s)](r)),a.length>0&&u.push(c.deleteByIds(a)),t.all(u)}function a(){l.submitting=!0,t.all([r("regions"),r("locations")]).then(function(){s.dismiss("cancel")}).catch(function(){l.errorMsg="Error while saving data"}).finally(function(){l.submitting=!0})}var l=this;l.dataLoaded=!1,l.errorMsg="",l.submitting=!1,l.availableData={regions:[],locations:[]},l.originalData={locations:[],regions:[]},l.selectedData={locations:[],regions:[]},l.cancel=o,l.submit=a,function(){t.all([i.getAll(),n.getAll()]).then(function(e){return{regions:e[0],locations:e[1]}}).then(function(s){return t.all(e.map(s,function(t,s){return l.availableData[s]=t,c["get"+e.capitalize(s)]()}))}).then(function(e){return{regions:e[0],locations:e[1]}}).then(function(e){Object.keys(e).forEach(function(t){l.originalData[t]=e[t].values,l.selectedData[t]=e[t].values.map(function(e){return e.entity_id})})}).then(function(){l.dataLoaded=!0})}()}return t.$inject=["$q","$uibModalInstance","Region","Location","Right"],{AccessRightsModalController:t}}),define("access-rights/access-rights.config",["common/angular"],function(e){"use strict";function t(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.module("access-rights.config",[]).config(t),t.$inject=["$httpProvider"]}),define("access-rights/access-rights.core",["common/angular","common/ui-select","common/angularBootstrap","common/modules/xeditable-civi","common/directives/loading","common/services/before-hash-query-params.service"],function(e){"use strict";e.module("access-rights.core",["ngAnimate","ui.bootstrap","ui.select","xeditable-civi","common.directives","common.services"])}),define("access-rights/services/apis/rights.api",[],function(){"use strict";function e(e,t,s){var i=s.parse(),n={contact_id:i.cid};return e.extend({getLocations:function(){return this.sendGET("Rights","getlocations",n,!1)},getRegions:function(){return this.sendGET("Rights","getregions",n,!1)},deleteByIds:function(e){return t.all(e.map(function(e){return this.sendPOST("Rights","delete",{contact_id:i.cid,id:e})}.bind(this)))},saveRegions:function(e){return t.all(e.map(function(e){return this.sendPOST("Rights","create",{contact_id:i.cid,entity_id:e,entity_type:"hrjc_region"})}.bind(this)))},saveLocations:function(e){return t.all(e.map(function(e){return this.sendPOST("Rights","create",{contact_id:i.cid,entity_id:e,entity_type:"hrjc_location"})}.bind(this)))}})}return e.$inject=["api","$q","beforeHashQueryParams"],{RightsAPI:e}}),define("access-rights/services/models/location.model",["common/services/api/option-group"],function(){"use strict";function e(e,t){return e.extend({getAll:function(){return t.valuesOf("hrjc_location")}})}return e.$inject=["Model","api.optionGroup"],{Location:e}}),define("access-rights/services/models/region.model",["common/services/api/option-group"],function(){"use strict";function e(e,t){return e.extend({getAll:function(){return t.valuesOf("hrjc_region")}})}return e.$inject=["Model","api.optionGroup"],{Region:e}}),define("access-rights/services/models/right.model",[],function(){"use strict";function e(e,t){return e.extend({getLocations:t.getLocations.bind(t),getRegions:t.getRegions.bind(t),deleteByIds:t.deleteByIds.bind(t),saveRegions:t.saveRegions.bind(t),saveLocations:t.saveLocations.bind(t)})}return e.$inject=["Model","RightsAPI"],{Right:e}}),define("access-rights/access-rights.models",["common/angular","access-rights/services/apis/rights.api","access-rights/services/models/location.model","access-rights/services/models/region.model","access-rights/services/models/right.model","common/services/api","common/models/model"],function(e,t,s,i,n){"use strict";return e.module("access-rights.models",["common.apis","common.models"]).factory(t).factory(s).factory(i).factory(n)}),define("access-rights/access-rights.run",["common/angular"],function(e){"use strict";function t(e,t,s){e.debug("app.run"),t.theme="bs3"}e.module("access-rights.run",[]).run(t),t.$inject=["$log","editableOptions","editableThemes"]}),define("access-rights/access-rights.module",["common/angular","access-rights/controllers/access-rights.controller","access-rights/controllers/access-rights-modal.controller","access-rights/access-rights.config","access-rights/access-rights.core","access-rights/access-rights.models","access-rights/access-rights.run"],function(e,t,s){"use strict";return e.module("access-rights",["access-rights.core","access-rights.config","access-rights.run","access-rights.models"]).controller(t).controller(s),e}),function(){"use strict";var e=CRM.vars.contactAccessRights.baseURL+"/js/src/access-rights";require.config({urlArgs:"bust="+(new Date).getTime(),paths:{"access-rights":e}}),require(["access-rights/access-rights.module"],function(e){document.dispatchEvent(new Event("accessRightsReady"))})}(require);
//# sourceMappingURL=/sites/all/modules/civicrm/tools/extensions/civihr/contactaccessrights/js/dist/access-rights.min.js.map