define("access-rights/controllers/access-rights.controller",["common/angular"],function(e){"use strict";function s(s,t,n){function c(){t.open({appendTo:e.element("[data-contact-actions-modals-container]"),controller:"AccessRightsModalController",controllerAs:"modalCtrl",bindToController:!0,templateUrl:n.baseUrl+"controllers/access-rights-modal.html"})}this.openModal=c}return s.$inject=["$rootElement","$uibModal","settings"],{AccessRightsController:s}}),define("access-rights/controllers/access-rights-modal.controller",["common/lodash"],function(e){"use strict";function s(s,t,n,c,i){function o(){t.dismiss("cancel")}function r(t){var n=l.originalData[t],c=l.selectedData[t],o=n.map(function(e){return e.entity_id}),r=e.difference(c,o),a=e.difference(o,c).map(function(s){return e.find(n,function(e){return e.entity_id===s}).id}),u=[];return r.length>0&&u.push(i["save"+e.capitalize(t)](r)),a.length>0&&u.push(i.deleteByIds(a)),s.all(u)}function a(){l.submitting=!0,s.all([r("regions"),r("locations")]).then(function(){t.dismiss("cancel")}).catch(function(){l.errorMsg="Error while saving data"}).finally(function(){l.submitting=!0})}var l=this;l.dataLoaded=!1,l.errorMsg="",l.submitting=!1,l.availableData={regions:[],locations:[]},l.originalData={locations:[],regions:[]},l.selectedData={locations:[],regions:[]},l.cancel=o,l.submit=a,function(){s.all([n.getAll(),c.getAll()]).then(function(e){return{regions:e[0],locations:e[1]}}).then(function(t){return s.all(e.map(t,function(s,t){return l.availableData[t]=s,i["get"+e.capitalize(t)]()}))}).then(function(e){return{regions:e[0],locations:e[1]}}).then(function(e){Object.keys(e).forEach(function(s){l.originalData[s]=e[s].values,l.selectedData[s]=e[s].values.map(function(e){return e.entity_id})})}).then(function(){l.dataLoaded=!0})}()}return s.$inject=["$q","$uibModalInstance","Region","Location","Right"],{AccessRightsModalController:s}}),define("access-rights/access-rights.config",["common/angular"],function(e){"use strict";function s(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.module("access-rights.config",[]).config(s),s.$inject=["$httpProvider"]}),define("access-rights/access-rights.constants",["common/angular"],function(e){"use strict";e.module("access-rights.constants",[]).constant("settings",{debug:+CRM.debug,baseUrl:CRM.vars.contactAccessRights.baseURL+"/js/src/access-rights/"})}),define("access-rights/access-rights.core",["common/angular","common/ui-select","common/angularBootstrap","common/modules/xeditable-civi","common/directives/loading","common/services/before-hash-query-params.service"],function(e){"use strict";e.module("access-rights.core",["ngAnimate","ui.bootstrap","ui.select","xeditable-civi","common.directives","common.services"])}),define("access-rights/services/apis/rights.api",[],function(){"use strict";function e(e,s,t){var n=t.parse(),c={contact_id:n.cid};return e.extend({getLocations:function(){return this.sendGET("Rights","getlocations",c,!1)},getRegions:function(){return this.sendGET("Rights","getregions",c,!1)},deleteByIds:function(e){return s.all(e.map(function(e){return this.sendPOST("Rights","delete",{contact_id:n.cid,id:e})}.bind(this)))},saveRegions:function(e){return s.all(e.map(function(e){return this.sendPOST("Rights","create",{contact_id:n.cid,entity_id:e,entity_type:"hrjc_region"})}.bind(this)))},saveLocations:function(e){return s.all(e.map(function(e){return this.sendPOST("Rights","create",{contact_id:n.cid,entity_id:e,entity_type:"hrjc_location"})}.bind(this)))}})}return e.$inject=["api","$q","beforeHashQueryParams"],{RightsAPI:e}}),define("access-rights/services/models/location.model",["common/services/api/option-group"],function(){"use strict";function e(e,s){return e.extend({getAll:function(){return s.valuesOf("hrjc_location")}})}return e.$inject=["Model","api.optionGroup"],{Location:e}}),define("access-rights/services/models/region.model",["common/services/api/option-group"],function(){"use strict";function e(e,s){return e.extend({getAll:function(){return s.valuesOf("hrjc_region")}})}return e.$inject=["Model","api.optionGroup"],{Region:e}}),define("access-rights/services/models/right.model",[],function(){"use strict";function e(e,s){return e.extend({getLocations:s.getLocations.bind(s),getRegions:s.getRegions.bind(s),deleteByIds:s.deleteByIds.bind(s),saveRegions:s.saveRegions.bind(s),saveLocations:s.saveLocations.bind(s)})}return e.$inject=["Model","RightsAPI"],{Right:e}}),define("access-rights/access-rights.models",["common/angular","access-rights/services/apis/rights.api","access-rights/services/models/location.model","access-rights/services/models/region.model","access-rights/services/models/right.model","common/services/api","common/models/model"],function(e,s,t,n,c){"use strict";return e.module("access-rights.models",["common.apis","common.models"]).factory(s).factory(t).factory(n).factory(c)}),define("access-rights/access-rights.run",["common/angular"],function(e){"use strict";function s(e,s,t){e.debug("app.run"),s.theme="bs3"}e.module("access-rights.run",[]).run(s),s.$inject=["$log","editableOptions","editableThemes"]}),define("access-rights/access-rights.module",["common/angular","access-rights/controllers/access-rights.controller","access-rights/controllers/access-rights-modal.controller","access-rights/access-rights.config","access-rights/access-rights.constants","access-rights/access-rights.core","access-rights/access-rights.models","access-rights/access-rights.run"],function(e,s,t){"use strict";return e.module("access-rights",["access-rights.core","access-rights.constants","access-rights.config","access-rights.run","access-rights.models"]).controller(s).controller(t),e}),function(){"use strict";var e=CRM.vars.contactAccessRights.baseURL+"/js/src/access-rights";require.config({urlArgs:"bust="+(new Date).getTime(),paths:{"access-rights":e}}),require(["access-rights/access-rights.module"],function(e){document.dispatchEvent(new Event("accessRightsReady"))})}(require);
//# sourceMappingURL=/sites/all/modules/civicrm/tools/extensions/civihr/contactaccessrights/js/dist/access-rights.min.js.map