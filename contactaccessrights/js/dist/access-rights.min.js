define("access-rights/apis/rights.api",[],function(){"use strict";function e(e,s,t){var n="Rights",c=t.parse(),i={contact_id:c.cid};return e.extend({getLocations:function(){return this.sendGET(n,"getlocations",i,!1)},getRegions:function(){return this.sendGET(n,"getregions",i,!1)},deleteByIds:function(e){return s.all(e.map(function(e){return this.sendPOST(n,"delete",{contact_id:c.cid,id:e})}.bind(this)))},saveRegions:function(e){return s.all(e.map(function(e){return this.sendPOST(n,"create",{contact_id:c.cid,entity_id:e,entity_type:"hrjc_region"})}.bind(this)))},saveLocations:function(e){return s.all(e.map(function(e){return this.sendPOST(n,"create",{contact_id:c.cid,entity_id:e,entity_type:"hrjc_location"})}.bind(this)))}})}return e.__name="RightsAPI",e.$inject=["api","$q","beforeHashQueryParams"],e}),define("access-rights/modules/access-rights.apis",["common/angular","common/services/api","access-rights/apis/rights.api"],function(e,s,t){"use strict";return e.module("access-rights.apis",["common.apis"]).factory(t.__name,t)}),define("access-rights/modules/access-rights.config",["common/angular"],function(e){"use strict";function s(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.module("access-rights.config",[]).config(s),s.$inject=["$httpProvider"]}),define("access-rights/controllers/access-rights.controller",["common/angular"],function(e){"use strict";function s(s,t){function n(){t.open({appendTo:e.element("[data-contact-actions-modals-container]"),controller:"AccessRightsModalController",controllerAs:"modalCtrl",bindToController:!0,templateUrl:CRM.vars.contactAccessRights.baseURL+"/views/access-rights-modal.html"})}var c=this;c.openModal=n}return s.__name="AccessRightsController",s.$inject=["$rootElement","$uibModal"],s}),define("access-rights/controllers/access-rights-modal.controller",["common/lodash"],function(e){"use strict";function s(s,t,n,c,i){function o(){t.dismiss("cancel")}function r(t){var n=l.originalData[t],c=l.selectedData[t],o=n.map(function(e){return e.entity_id}),r=e.difference(c,o),a=e.difference(o,c).map(function(s){return e.find(n,function(e){return e.entity_id===s}).id}),u=[];return r.length>0&&u.push(i["save"+e.capitalize(t)](r)),a.length>0&&u.push(i.deleteByIds(a)),s.all(u)}function a(){l.submitting=!0,s.all([r("regions"),r("locations")]).then(function(){t.dismiss("cancel")}).catch(function(){l.errorMsg="Error while saving data"}).finally(function(){l.submitting=!0})}var l=this;l.dataLoaded=!1,l.errorMsg="",l.submitting=!1,l.availableData={regions:[],locations:[]},l.originalData={locations:[],regions:[]},l.selectedData={locations:[],regions:[]},l.cancel=o,l.submit=a,function(){s.all([n.getAll(),c.getAll()]).then(function(e){return{regions:e[0],locations:e[1]}}).then(function(t){return s.all(e.map(t,function(s,t){return l.availableData[t]=s,i["get"+e.capitalize(t)]()}))}).then(function(e){return{regions:e[0],locations:e[1]}}).then(function(e){Object.keys(e).forEach(function(s){l.originalData[s]=e[s].values,l.selectedData[s]=e[s].values.map(function(e){return e.entity_id})})}).then(function(){l.dataLoaded=!0})}()}return s.__name="AccessRightsModalController",s.$inject=["$q","$uibModalInstance","Region","Location","Right"],s}),define("access-rights/modules/access-rights.controllers",["common/angular","access-rights/controllers/access-rights.controller","access-rights/controllers/access-rights-modal.controller"],function(e,s,t){"use strict";return e.module("access-rights.controllers",[]).controller(s.__name,s).controller(t.__name,t)}),define("access-rights/modules/access-rights.core",["common/angular","common/ui-select","common/angularBootstrap","common/modules/xeditable-civi","common/directives/loading","common/services/before-hash-query-params.service"],function(e){"use strict";e.module("access-rights.core",["ngAnimate","ui.bootstrap","ui.select","xeditable-civi","common.directives","common.services"])}),define("access-rights/models/location.model",["common/services/api/option-group"],function(){"use strict";function e(e,s){return e.extend({getAll:function(){return s.valuesOf("hrjc_location")}})}return e.__name="Location",e.$inject=["Model","api.optionGroup"],e}),define("access-rights/models/region.model",["common/services/api/option-group"],function(){"use strict";function e(e,s){return e.extend({getAll:function(){return s.valuesOf("hrjc_region")}})}return e.__name="Region",e.$inject=["Model","api.optionGroup"],e}),define("access-rights/models/right.model",[],function(){"use strict";function e(e,s){return e.extend({getLocations:s.getLocations.bind(s),getRegions:s.getRegions.bind(s),deleteByIds:s.deleteByIds.bind(s),saveRegions:s.saveRegions.bind(s),saveLocations:s.saveLocations.bind(s)})}return e.__name="Right",e.$inject=["Model","RightsAPI"],e}),define("access-rights/modules/access-rights.models",["common/angular","access-rights/models/location.model","access-rights/models/region.model","access-rights/models/right.model","common/models/model","access-rights/modules/access-rights.apis"],function(e,s,t,n){"use strict";return e.module("access-rights.models",["common.models","access-rights.apis"]).factory(s.__name,s).factory(t.__name,t).factory(n.__name,n)}),define("access-rights/modules/access-rights.run",["common/angular"],function(e){"use strict";function s(e,s,t){e.debug("app.run"),s.theme="bs3"}e.module("access-rights.run",[]).run(s),s.$inject=["$log","editableOptions","editableThemes"]}),define("access-rights/modules/access-rights.module",["common/angular","access-rights/modules/access-rights.apis","access-rights/modules/access-rights.config","access-rights/modules/access-rights.controllers","access-rights/modules/access-rights.core","access-rights/modules/access-rights.models","access-rights/modules/access-rights.run"],function(e){"use strict";return e.module("access-rights",["access-rights.core","access-rights.config","access-rights.run","access-rights.apis","access-rights.controllers","access-rights.models"]),e}),function(){"use strict";var e=CRM.vars.contactAccessRights.baseURL+"/js/src/access-rights";require.config({urlArgs:"bust="+(new Date).getTime(),paths:{"access-rights":e}}),require(["access-rights/modules/access-rights.module"],function(e){document.dispatchEvent(new Event("accessRightsReady"))})}(require);
//# sourceMappingURL=/sites/all/modules/civicrm/tools/extensions/civihr/contactaccessrights/access-rights.min.js.map