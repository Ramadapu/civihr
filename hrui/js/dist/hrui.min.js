!function(t,o){function n(o){o?(t(".crm-summary-contactname-block").removeClass("crm-summary-contactname-block-without-contract"),o.position&&t(".crm-contact-detail-position").html("<strong>Position:</strong> "+o.position),o.location&&t(".crm-contact-detail-location").html("<strong>Normal place of work:</strong> "+o.location)):(t(".crm-summary-contactname-block").addClass("crm-summary-contactname-block-without-contract"),t(".crm-contact-detail-position").html(""),t(".crm-contact-detail-location").html(""),c(null))}function c(o){o&&o.departments&&o.departments.length>0?t(".crm-contact-detail-departments").html("<strong>Department:</strong> "+o.departments.join(", ")):t(".crm-contact-detail-departments").html("")}t(document).on("crmLoad",function(o){t(".crm-inline-edit").one("DOMSubtreeModified",function(){var o=t(this).find("form");1===o.length&&o.find("label").each(function(){var o=t(this),n=o.attr("for");t("#"+n).attr("placeholder",o.text())})})}).on("updateContactHeader",function(t,o){void 0!==o.contract&&n(o.contract),void 0!==o.roles&&c(o.roles)})}(CRM.$,CRM._);
!function(t,e){function a(){var e=t(".crm-link-home");_(e,d(e,C(e)))}function n(){t.ajax("/civicrm/hrcore/usermenu?snippet=4",{dataType:"html",success:function(t){f(t,"civihr-menu")}})}function o(){if(CRM.cid&&CRM.hideGId){var e=t(".Inline_Custom_Data");e.appendTo(t("#contactinfo-block").parent("div").parent("div")),e.removeClass("crm-collapsible"),e.removeClass("collapsed"),e.addClass("crm-summary-block"),t(".Inline_Custom_Data div.collapsible-title").css({display:"none"}),t(".Inline_Custom_Data div.crm-summary-block").css({display:"block"})}t("#customFields").length<1&&(t("#Inline_Custom_Data label").each(function(){t("#nick_name").parent().after('<td id="customFields"></td>');var e=t(this).attr("for"),a=t("#"+e).detach();t("#customFields").append(t(this)),t("#customFields").append(a)}),t("#Inline_Custom_Data").remove())}function i(e){1===t(e).length&&t(e).on("change",u)}function c(){t(".CRM_HRRecruitment_Form_Application").addClass("crm-form-block"),t(".CRM_HRRecruitment_Form_Application .crm-profile-name-application_profile").addClass("form-layout-compressed")}function r(e){"contactForm"!==CRM.formName&&"viewSummary"!==CRM.pageName||(t(".crm-contact-job_title",".crm-summary-contactinfo-block").length&&t(".crm-contact-tabs-list #tab_summary a",e.target).text("Personal Details"),o(e.target),h(e.target))}function m(){1===t(".CRM_HRRecruitment_Form_HRVacancy").length&&(p(t('label[for="start_date"]').parents("tr")),p(t('label[for="end_date"]').parents("tr")),t('[name="entryURL"]').val().indexOf(";template=1")>-1&&t(t(".CRM_HRRecruitment_Form_HRVacancy tbody").get(0)).addClass("CRM_HRRecruitment_Form_HRVacancy_Template"))}function l(){t("#activityCustomData").attr("colspan",3),t("#crm-activity-view-table .crm-case-activity-view-Client .label").html("Contact"),t("span.crm-frozen-field",".crm-profile-name-hrident_tab").closest("div").parent("div").hide(),t(".crm-accordion-header.crm-master-accordion-header").on("click",function(){window.setTimeout(function(){Array.prototype.forEach.call(document.querySelectorAll(".listing-box"),function(t){Ps.initialize(t)})},0)})}function s(){t("INPUT#contact_source").parent("td").children("a").click(function(){t("#crm-notification-container .crm-help .notify-content").remove(),t("#crm-notification-container .crm-help p").length&&t("#crm-notification-container .crm-help p").remove(),t("#crm-notification-container .crm-help").append("<p>Source is a useful field where data has been migrated to CiviHR from one or a number of other legacy systems. The Source field will indicate which legacy system the contact has come from.</p>")})}function d(e,a){return t("li > a",e).first().text("Home").wrapInner('<span class="menumain-label">').prepend(a)}function f(e,a){var n=t(e),o=t("<div>");o.attr("id",a),o.append(t("#civicrm-menu")),o.append(n),o.insertAfter("#page")}function u(){var e=t(this)[0].files[0];t("#js-uploaded-file").remove(),void 0!==e&&(t(this).after('<span id="js-uploaded-file" class="uploaded-file">'+e.name+' <span class="uploaded-file-icon-trash"><i class="fa fa-trash-o"></i> Remove</span>'),t(".uploaded-file-icon-trash").on("click",v))}function p(t){t.find("label").attr("for",t.find(".crm-form-date").attr("id"))}function h(e){t("div.crm-contact-current_employer, div.crm-contact-job_title",".crm-summary-contactinfo-block").parent("div.crm-summary-row").hide(),t("form#ContactInfo input#employer_id, form#ContactInfo input#job_title",e).closest("div.crm-summary-row").hide(),t("input#employer_id, input#job_title","form#Contact").parent("td").hide(),t(".HRJobContract_Summary",e).insertBefore(t(".crm-summary-contactinfo-block")),t("div.email-signature, td#Email-Bulkmail-html","form#Contact").hide(),t("#Email-Primary","form#Contact").prev("td").prev("td").hide(),t("td#Email-Bulkmail-html, #Email-Primary","form#Contact").prev("td").hide(),t(".crm-demographics-accordion","form#Contact").insertAfter(t(".crm-contactDetails-accordion")),t("tr#Phone_Block_2","form#Contact").length<1&&t("#addPhone").click()}function v(){var e=t("#js-uploaded-file").parent().find('input[type="file"]');t("#js-uploaded-file").remove(),e.val("")}function _(t,e){t.off().find("#civicrm-home").before(e).remove()}function C(e){return t(".crm-logo-sm",e).addClass("chr_logo chr_logo--default-color").removeClass("crm-logo-sm").wrap('<span class="menumain-icon">').parent()}function y(){t(".menumain").not(".crm-Self_Service_Portal").hover(function(){t(this).addClass("activetarget")},function(){t(this).removeClass("activetarget")})}function b(){t("#root-menu-div .menu-item-arrow").each(function(e){var a=t(this);a.before('<i class="fa fa-caret-right menu-item-arrow"></i>'),a.remove()})}t(document).on("crmLoad",function(t){i("input[type='file']"),m(),r(t),l(),s()}).ready(function(){n(),a(),c(),b(),y()})}(CRM.$,CRM._);
!function(t){"use strict";var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;t.fn.attrchange=function(t){if(n){var e={subtree:!1,attributes:!0},i=new n(function(n){n.forEach(function(n){t.call(n.target,n)})});return this.each(function(){i.observe(this,e)})}}}(CRM.$);
!function(n){"use strict";var i=n("body");i.on("click",".btn-slide",function(){function t(){n(".civihr-popup").remove(),i.removeClass("civihr-popup-open")}function o(){s=r.clone(!0).appendTo(i).addClass("civihr-popup")}function c(){p.data("attrchange-is-on")||(p.data("attrchange-is-on",!0),p.attrchange(function(){p.hasClass("btn-slide-active")||t()}))}function a(){s.find("a").click(function(){var i=n(this).parent().index();r.find("li:nth("+i+") a").click()})}function e(){var n=p.offset();s.css({left:+n.left-(s.width()-p.outerWidth()),top:+n.top+p.outerHeight()}),s.show(),i.addClass("civihr-popup-open")}var s,p=n(this),r=p.children("ul.panel");!function(){t(),o(),e(),a(),c()}()})}(CRM.$);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRhY3QuanMiLCJocnVpLmpzIiwiY2l2aWhyLXBvcHVwL2F0dHJjaGFuZ2UuanMiLCJjaXZpaHItcG9wdXAvY2l2aWhyLXBvcHVwLmpzIl0sIm5hbWVzIjpbIiQiLCJfIiwidXBkYXRlQ29udGFjdEhlYWRlckNvbnRyYWN0RGV0YWlscyIsImNvbnRyYWN0IiwicmVtb3ZlQ2xhc3MiLCJwb3NpdGlvbiIsImh0bWwiLCJsb2NhdGlvbiIsImFkZENsYXNzIiwidXBkYXRlQ29udGFjdEhlYWRlclJvbGVzRGV0YWlscyIsInJvbGVzIiwiZGVwYXJ0bWVudHMiLCJsZW5ndGgiLCJqb2luIiwiZG9jdW1lbnQiLCJvbiIsImUiLCJvbmUiLCIkZm9ybSIsInRoaXMiLCJmaW5kIiwiZWFjaCIsIiRsYWJlbCIsImlkIiwiYXR0ciIsInRleHQiLCJkYXRhIiwiQ1JNIiwiYW1lbmRBcHBMb2dvTWVudUl0ZW0iLCIkbWVudUl0ZW0iLCJyZW1vdmVMb2dvU3ViTWVudUFuZEtlZXBPbmx5SG9tZUxpbmsiLCJjdXN0b21pemVIb21lTGlua0luTG9nb01lbnVJdGVtIiwic3dhcEFuZFdyYXBBcHBMb2dvIiwiYWRkVXNlck1lbnVUb01haW5NZW51IiwiYWpheCIsImRhdGFUeXBlIiwic3VjY2VzcyIsIm1lbnVNYXJrdXAiLCJpbmplY3RVc2VyTWVudUluQU1haW5NZW51V3JhcHBlciIsImFkZEdvdmVybm1lbnRJZEZpZWxkIiwiY2lkIiwiaGlkZUdJZCIsImlubGluZURhdGFCbG9jayIsImFwcGVuZFRvIiwicGFyZW50IiwiY3NzIiwiZGlzcGxheSIsImFmdGVyIiwibm9kZUlEIiwiY3VzdG9tRmllbGQiLCJkZXRhY2giLCJhcHBlbmQiLCJyZW1vdmUiLCJhZGRVcGxvYWRGaWxlTGlzdGVuZXIiLCJzZWxlY3RvciIsImluc2VydEZpbGUiLCJhbWVuZEFwcGxpY2F0aW9uRm9ybSIsImFtZW5kQ29udGFjdFBhZ2VBbmRGb3JtIiwiZm9ybU5hbWUiLCJwYWdlTmFtZSIsInRhcmdldCIsIm1pc2NDb250YWN0UGFnZUNoYW5nZXMiLCJhbWVuZFZhY2FuY3lGb3JtIiwibGlua0xhYmVsVG9EYXRlcGlja2VySW5wdXQiLCJwYXJlbnRzIiwidmFsIiwiaW5kZXhPZiIsImdldCIsImFwcGx5TWlzY0NoYW5nZXMiLCJjbG9zZXN0IiwiaGlkZSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJBcnJheSIsInByb3RvdHlwZSIsImZvckVhY2giLCJjYWxsIiwicXVlcnlTZWxlY3RvckFsbCIsImVsZW1lbnQiLCJQcyIsImluaXRpYWxpemUiLCJjaGFuZ2VDb250YWN0U291cmNlRmllbGRIZWxwVGV4dCIsImNoaWxkcmVuIiwiY2xpY2siLCIkYXBwTG9nbyIsImZpcnN0Iiwid3JhcElubmVyIiwicHJlcGVuZCIsIndyYXBwZXJJZCIsIiRtZW51TWFya3VwIiwiJG1lbnVXcmFwcGVyIiwiaW5zZXJ0QWZ0ZXIiLCJmaWxlTmFtZSIsImZpbGVzIiwidW5kZWZpbmVkIiwibmFtZSIsInJlbW92ZUZpbGUiLCIkbGluZSIsImluc2VydEJlZm9yZSIsInByZXYiLCIkaW5wdXQiLCIkaG9tZUxpbmsiLCJvZmYiLCJiZWZvcmUiLCJ3cmFwIiwidG9nZ2xlQWN0aXZlQ2xhc3NPbkhvdmVyT25BbnlNYWluTWVudUl0ZW0iLCJub3QiLCJob3ZlciIsInVzZUZvbnRBd2Vzb21lQXJyb3dzSW5TdWJNZW51SXRlbXMiLCIkZWxlbWVudCIsIiRhcnJvdyIsInJlYWR5IiwiTXV0YXRpb25PYnNlcnZlciIsIldlYktpdE11dGF0aW9uT2JzZXJ2ZXIiLCJNb3pNdXRhdGlvbk9ic2VydmVyIiwiZm4iLCJhdHRyY2hhbmdlIiwiY2FsbGJhY2siLCJvcHRpb25zIiwic3VidHJlZSIsImF0dHJpYnV0ZXMiLCJvYnNlcnZlciIsIm11dGF0aW9ucyIsIm9ic2VydmUiLCIkYm9keSIsImNsb3NlUG9wdXBQYW5lbHMiLCJjcmVhdGVQb3B1cENsb25lIiwiJHBvcHVwQ2xvbmUiLCIkcG9wdXAiLCJjbG9uZSIsImxpc3RlblRvTW91c2VPdXRFdmVudCIsIiRidXR0b24iLCJoYXNDbGFzcyIsIm1hcENsb25lQ2xpY2tFdmVudHNUb09yaWdpbiIsImFjdGlvbkluZGV4IiwiaW5kZXgiLCJvcGVuUG9wdXBDbG9uZSIsImJ1dHRvbk9mZnNldCIsIm9mZnNldCIsImxlZnQiLCJ3aWR0aCIsIm91dGVyV2lkdGgiLCJ0b3AiLCJvdXRlckhlaWdodCIsInNob3ciXSwibWFwcGluZ3MiOiJDQUFDLFNBQVVBLEVBQUdDLEdBK0JaLFFBQVNDLEdBQW1DQyxHQUN0Q0EsR0FDRkgsRUFBRSxrQ0FBa0NJLFlBQVksa0RBRTVDRCxFQUFTRSxVQUNYTCxFQUFFLGdDQUFnQ00sS0FBSyw4QkFBK0JILEVBQVNFLFVBRzdFRixFQUFTSSxVQUNYUCxFQUFFLGdDQUFnQ00sS0FBSywwQ0FBMkNILEVBQVNJLFlBRzdGUCxFQUFFLGtDQUFrQ1EsU0FBUyxrREFDN0NSLEVBQUUsZ0NBQWdDTSxLQUFLLElBQ3ZDTixFQUFFLGdDQUFnQ00sS0FBSyxJQUV2Q0csRUFBZ0MsT0FTcEMsUUFBU0EsR0FBZ0NDLEdBQ25DQSxHQUFTQSxFQUFNQyxhQUFlRCxFQUFNQyxZQUFZQyxPQUFTLEVBQzNEWixFQUFFLG1DQUFtQ00sS0FBSyxnQ0FBa0NJLEVBQU1DLFlBQVlFLEtBQUssT0FFbkdiLEVBQUUsbUNBQW1DTSxLQUFLLElBMUQ5Q04sRUFBRWMsVUFDQ0MsR0FBRyxVQUFXLFNBQVNDLEdBQ3RCaEIsRUFBRSxvQkFBb0JpQixJQUFJLHFCQUFzQixXQUM5QyxHQUFJQyxHQUFRbEIsRUFBRW1CLE1BQU1DLEtBQUssT0FFSixLQUFqQkYsRUFBTU4sUUFDUk0sRUFBTUUsS0FBSyxTQUFTQyxLQUFLLFdBQ3ZCLEdBQUlDLEdBQVN0QixFQUFFbUIsTUFDWEksRUFBS0QsRUFBT0UsS0FBSyxNQUNyQnhCLEdBQUUsSUFBTXVCLEdBQUlDLEtBQUssY0FBZUYsRUFBT0csY0FLOUNWLEdBQUcsc0JBQXVCLFNBQVVDLEVBQUdVLE9BQ1QsS0FBbEJBLEVBQUt2QixVQUNkRCxFQUFtQ3dCLEVBQUt2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LFdBaUI5QixRQUFTOEcsS0FDUDdILEVBQUUsaUJBQWlCb0QsU0FDbkJ3RSxFQUFNeEgsWUFBWSxxQkFPcEIsUUFBUzBILEtBQ1BDLEVBQWNDLEVBQU9DLE9BQU0sR0FDeEJ0RixTQUFTaUYsR0FDVHBILFNBQVMsZ0JBVWQsUUFBUzBILEtBRUhDLEVBQVF6RyxLQUFLLHNCQUlqQnlHLEVBQVF6RyxLQUFLLG9CQUFvQixHQUNqQ3lHLEVBQVFmLFdBQVcsV0FFYmUsRUFBUUMsU0FBUyxxQkFJckJQLE9BU0osUUFBU1EsS0FDUE4sRUFBWTNHLEtBQUssS0FBSytELE1BQU0sV0FDMUIsR0FBSW1ELEdBQWN0SSxFQUFFbUIsTUFBTXlCLFNBQVMyRixPQUVuQ1AsR0FBTzVHLEtBQUssVUFBWWtILEVBQWMsT0FBT25ELFVBUWpELFFBQVNxRCxLQUNQLEdBQUlDLEdBQWVOLEVBQVFPLFFBRTNCWCxHQUFZbEYsS0FDVjhGLE1BQU9GLEVBQWFFLE1BQVFaLEVBQVlhLFFBQVVULEVBQVFVLGNBQzFEQyxLQUFNTCxFQUFhSyxJQUFNWCxFQUFRWSxnQkFFbkNoQixFQUFZaUIsT0FDWnBCLEVBQU1wSCxTQUFTLHFCQWhGakIsR0FBSXVILEdBQ0FJLEVBQVVuSSxFQUFFbUIsTUFDWjZHLEVBQVNHLEVBQVFqRCxTQUFTLGFBRTlCLFdBQ0UyQyxJQUNBQyxJQUNBVSxJQUNBSCxJQUNBSCxVQTBFSHZHLElBQUkzQiIsImZpbGUiOiJocnVpLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoJCwgXykge1xuXG4gICQoZG9jdW1lbnQpXG4gICAgLm9uKCdjcm1Mb2FkJywgZnVuY3Rpb24oZSkge1xuICAgICAgJCgnLmNybS1pbmxpbmUtZWRpdCcpLm9uZSgnRE9NU3VidHJlZU1vZGlmaWVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciAkZm9ybSA9ICQodGhpcykuZmluZCgnZm9ybScpO1xuXG4gICAgICAgIGlmICgkZm9ybS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAkZm9ybS5maW5kKCdsYWJlbCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJGxhYmVsID0gJCh0aGlzKTtcbiAgICAgICAgICAgIHZhciBpZCA9ICRsYWJlbC5hdHRyKCdmb3InKTtcbiAgICAgICAgICAgICQoJyMnICsgaWQpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJGxhYmVsLnRleHQoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgICAub24oJ3VwZGF0ZUNvbnRhY3RIZWFkZXInLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xuICAgICAgaWYgKHR5cGVvZiBkYXRhLmNvbnRyYWN0ICE9PSAndW5kZWZpbmVkJykgIHtcbiAgICAgICAgdXBkYXRlQ29udGFjdEhlYWRlckNvbnRyYWN0RGV0YWlscyhkYXRhLmNvbnRyYWN0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBkYXRhLnJvbGVzICE9PSAndW5kZWZpbmVkJykgIHtcbiAgICAgICAgdXBkYXRlQ29udGFjdEhlYWRlclJvbGVzRGV0YWlscyhkYXRhLnJvbGVzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgY29udGFjdCBoZWFkZXIgd2l0aCB0aGUgZ2l2ZW4gY29udHJhY3QgZGV0YWlsc1xuICAgKlxuICAgKiBAcGFyYW0gIHtvYmplY3R9IGNvbnRyYWN0XG4gICAqL1xuICBmdW5jdGlvbiB1cGRhdGVDb250YWN0SGVhZGVyQ29udHJhY3REZXRhaWxzKGNvbnRyYWN0KSB7XG4gICAgaWYgKGNvbnRyYWN0KSAge1xuICAgICAgJCgnLmNybS1zdW1tYXJ5LWNvbnRhY3RuYW1lLWJsb2NrJykucmVtb3ZlQ2xhc3MoJ2NybS1zdW1tYXJ5LWNvbnRhY3RuYW1lLWJsb2NrLXdpdGhvdXQtY29udHJhY3QnKTtcblxuICAgICAgaWYgKGNvbnRyYWN0LnBvc2l0aW9uKSB7XG4gICAgICAgICQoJy5jcm0tY29udGFjdC1kZXRhaWwtcG9zaXRpb24nKS5odG1sKCc8c3Ryb25nPlBvc2l0aW9uOjwvc3Ryb25nPiAnKyBjb250cmFjdC5wb3NpdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb250cmFjdC5sb2NhdGlvbikge1xuICAgICAgICAkKCcuY3JtLWNvbnRhY3QtZGV0YWlsLWxvY2F0aW9uJykuaHRtbCgnPHN0cm9uZz5Ob3JtYWwgcGxhY2Ugb2Ygd29yazo8L3N0cm9uZz4gJysgY29udHJhY3QubG9jYXRpb24pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAkKCcuY3JtLXN1bW1hcnktY29udGFjdG5hbWUtYmxvY2snKS5hZGRDbGFzcygnY3JtLXN1bW1hcnktY29udGFjdG5hbWUtYmxvY2std2l0aG91dC1jb250cmFjdCcpO1xuICAgICAgJCgnLmNybS1jb250YWN0LWRldGFpbC1wb3NpdGlvbicpLmh0bWwoJycpO1xuICAgICAgJCgnLmNybS1jb250YWN0LWRldGFpbC1sb2NhdGlvbicpLmh0bWwoJycpO1xuXG4gICAgICB1cGRhdGVDb250YWN0SGVhZGVyUm9sZXNEZXRhaWxzKG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBjb250YWN0IGhlYWRlciB3aXRoIHRoZSBnaXZlbiByb2xlcyBkZXRhaWxzXG4gICAqXG4gICAqIEBwYXJhbSAge29iamVjdH0gY29udHJhY3RcbiAgICovXG4gIGZ1bmN0aW9uIHVwZGF0ZUNvbnRhY3RIZWFkZXJSb2xlc0RldGFpbHMocm9sZXMpIHtcbiAgICBpZiAocm9sZXMgJiYgcm9sZXMuZGVwYXJ0bWVudHMgJiYgcm9sZXMuZGVwYXJ0bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgJCgnLmNybS1jb250YWN0LWRldGFpbC1kZXBhcnRtZW50cycpLmh0bWwoJzxzdHJvbmc+RGVwYXJ0bWVudDo8L3N0cm9uZz4gJyArIHJvbGVzLmRlcGFydG1lbnRzLmpvaW4oJywgJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCcuY3JtLWNvbnRhY3QtZGV0YWlsLWRlcGFydG1lbnRzJykuaHRtbCgnJyk7XG4gICAgfVxuICB9XG59KENSTS4kLCBDUk0uXykpO1xuIiwiLyogZ2xvYmFsIFBzICovXG5cbi8vIENvcHlyaWdodCBDaXZpQ1JNIExMQyAyMDEzLiBTZWUgaHR0cDovL2Npdmljcm0ub3JnL2xpY2Vuc2luZ1xuKGZ1bmN0aW9uICgkLCBfKSB7XG4gICQoZG9jdW1lbnQpXG4gICAgLm9uKCdjcm1Mb2FkJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGFkZFVwbG9hZEZpbGVMaXN0ZW5lcihcImlucHV0W3R5cGU9J2ZpbGUnXVwiKTtcbiAgICAgIGFtZW5kVmFjYW5jeUZvcm0oKTtcbiAgICAgIGFtZW5kQ29udGFjdFBhZ2VBbmRGb3JtKGUpO1xuICAgICAgYXBwbHlNaXNjQ2hhbmdlcygpO1xuICAgICAgY2hhbmdlQ29udGFjdFNvdXJjZUZpZWxkSGVscFRleHQoKTtcbiAgICB9KVxuICAgIC5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICBhZGRVc2VyTWVudVRvTWFpbk1lbnUoKTtcbiAgICAgIGFtZW5kQXBwTG9nb01lbnVJdGVtKCk7XG4gICAgICBhbWVuZEFwcGxpY2F0aW9uRm9ybSgpO1xuICAgICAgdXNlRm9udEF3ZXNvbWVBcnJvd3NJblN1Yk1lbnVJdGVtcygpO1xuICAgICAgdG9nZ2xlQWN0aXZlQ2xhc3NPbkhvdmVyT25BbnlNYWluTWVudUl0ZW0oKTtcbiAgICB9KTtcblxuICAvKipcbiAgICogQ3VzdG9taXplcyB0aGUgYXBwIGxvZ28gbWVudSBpdGVtLCBzd2l0Y2hpbmcgZnJvbSB0aGUgQ2l2aUNSTSBsb2dvXG4gICAqIHRvIHRoZSBDaXZpSFIgbG9nbywgYW5kIG1ha2luZyB0aGUgaXRlbSBhIGRpcmVjdCBsaW5rIGluc3RlYWQgb2YgYVxuICAgKiB0b2dnbGUgZm9yIGEgc3ViIG1lbnUgZHJvcGRvd25cbiAgICovXG4gIGZ1bmN0aW9uIGFtZW5kQXBwTG9nb01lbnVJdGVtICgpIHtcbiAgICB2YXIgJG1lbnVJdGVtID0gJCgnLmNybS1saW5rLWhvbWUnKTtcbiAgICB2YXIgJHdyYXBwZWRMb2dvID0gc3dhcEFuZFdyYXBBcHBMb2dvKCRtZW51SXRlbSk7XG4gICAgdmFyICRjdXN0b21Ib21lTGluayA9IGN1c3RvbWl6ZUhvbWVMaW5rSW5Mb2dvTWVudUl0ZW0oJG1lbnVJdGVtLCAkd3JhcHBlZExvZ28pO1xuXG4gICAgcmVtb3ZlTG9nb1N1Yk1lbnVBbmRLZWVwT25seUhvbWVMaW5rKCRtZW51SXRlbSwgJGN1c3RvbUhvbWVMaW5rKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSB1c2VyIG1lbnUgYnkgZmV0Y2hpbmcgaXQgZnJvbSB0aGUgaHJjb3JlIGV4dGVuc2lvblxuICAgKi9cbiAgZnVuY3Rpb24gYWRkVXNlck1lbnVUb01haW5NZW51ICgpIHtcbiAgICAkLmFqYXgoJy9jaXZpY3JtL2hyY29yZS91c2VybWVudT9zbmlwcGV0PTQnLCB7XG4gICAgICBkYXRhVHlwZTogJ2h0bWwnLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKG1lbnVNYXJrdXApIHtcbiAgICAgICAgaW5qZWN0VXNlck1lbnVJbkFNYWluTWVudVdyYXBwZXIobWVudU1hcmt1cCwgJ2Npdmloci1tZW51Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0aGUgR292ZXJubWVudCBJRCBmaWVsZCBvbiB0aGUgUGVyc29uYWwgRGV0YWlscyBwYWdlIGFuZCBvbiB0aGUgRWRpdFxuICAgKiBDb250YWN0IGZvcm0uXG4gICAqL1xuICBmdW5jdGlvbiBhZGRHb3Zlcm5tZW50SWRGaWVsZCAoKSB7XG4gICAgLy8gVXBkYXRlcyBQZXJzb25hbCBEZXRhaWxzIFBhZ2VcbiAgICBpZiAoQ1JNLmNpZCAmJiBDUk0uaGlkZUdJZCkge1xuICAgICAgdmFyIGlubGluZURhdGFCbG9jayA9ICQoJy5JbmxpbmVfQ3VzdG9tX0RhdGEnKTtcblxuICAgICAgaW5saW5lRGF0YUJsb2NrLmFwcGVuZFRvKCQoJyNjb250YWN0aW5mby1ibG9jaycpLnBhcmVudCgnZGl2JykucGFyZW50KCdkaXYnKSk7XG4gICAgICBpbmxpbmVEYXRhQmxvY2sucmVtb3ZlQ2xhc3MoJ2NybS1jb2xsYXBzaWJsZScpO1xuICAgICAgaW5saW5lRGF0YUJsb2NrLnJlbW92ZUNsYXNzKCdjb2xsYXBzZWQnKTtcbiAgICAgIGlubGluZURhdGFCbG9jay5hZGRDbGFzcygnY3JtLXN1bW1hcnktYmxvY2snKTtcblxuICAgICAgJCgnLklubGluZV9DdXN0b21fRGF0YSBkaXYuY29sbGFwc2libGUtdGl0bGUnKS5jc3Moe2Rpc3BsYXk6ICdub25lJ30pO1xuICAgICAgJCgnLklubGluZV9DdXN0b21fRGF0YSBkaXYuY3JtLXN1bW1hcnktYmxvY2snKS5jc3Moe2Rpc3BsYXk6ICdibG9jayd9KTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGVzIEVkaXQgQ29udGFjdCBGb3JtXG4gICAgaWYgKCQoJyNjdXN0b21GaWVsZHMnKS5sZW5ndGggPCAxKSB7XG4gICAgICAkKCcjSW5saW5lX0N1c3RvbV9EYXRhIGxhYmVsJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNuaWNrX25hbWUnKS5wYXJlbnQoKS5hZnRlcignPHRkIGlkPVwiY3VzdG9tRmllbGRzXCI+PC90ZD4nKTtcbiAgICAgICAgdmFyIG5vZGVJRCA9ICQodGhpcykuYXR0cignZm9yJyk7XG4gICAgICAgIHZhciBjdXN0b21GaWVsZCA9ICQoJyMnICsgbm9kZUlEKS5kZXRhY2goKTtcbiAgICAgICAgJCgnI2N1c3RvbUZpZWxkcycpLmFwcGVuZCgkKHRoaXMpKTtcbiAgICAgICAgJCgnI2N1c3RvbUZpZWxkcycpLmFwcGVuZChjdXN0b21GaWVsZCk7XG4gICAgICB9KTtcblxuICAgICAgJCgnI0lubGluZV9DdXN0b21fRGF0YScpLnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXIgb24gaW5wdXRbdHlwZT1cImZpbGVcIl1cbiAgICogQHBhcmFtIHtqUXVlcnkgT2JqZWN0fSBzZWxlY3RvciBbc2VsZWN0b3IgZnJvbSBpbnB1dCBmaWxlXVxuICAgKi9cbiAgZnVuY3Rpb24gYWRkVXBsb2FkRmlsZUxpc3RlbmVyIChzZWxlY3Rvcikge1xuICAgIGlmICgkKHNlbGVjdG9yKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICQoc2VsZWN0b3IpLm9uKCdjaGFuZ2UnLCBpbnNlcnRGaWxlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQW1lbmRzIHRoZSBhcHBsaWNhdGlvbiBmb3JtXG4gICAqL1xuICBmdW5jdGlvbiBhbWVuZEFwcGxpY2F0aW9uRm9ybSAoKSB7XG4gICAgJCgnLkNSTV9IUlJlY3J1aXRtZW50X0Zvcm1fQXBwbGljYXRpb24nKS5hZGRDbGFzcygnY3JtLWZvcm0tYmxvY2snKTtcbiAgICAkKCcuQ1JNX0hSUmVjcnVpdG1lbnRfRm9ybV9BcHBsaWNhdGlvbiAuY3JtLXByb2ZpbGUtbmFtZS1hcHBsaWNhdGlvbl9wcm9maWxlJykuYWRkQ2xhc3MoJ2Zvcm0tbGF5b3V0LWNvbXByZXNzZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbWVuZHMgdGhlIGNvbnRhY3QgcGFnZSBhbmQgdGhlIGNvbnRhY3QgZm9ybVxuICAgKi9cbiAgZnVuY3Rpb24gYW1lbmRDb250YWN0UGFnZUFuZEZvcm0gKGUpIHtcbiAgICBpZiAoQ1JNLmZvcm1OYW1lID09PSAnY29udGFjdEZvcm0nIHx8IENSTS5wYWdlTmFtZSA9PT0gJ3ZpZXdTdW1tYXJ5Jykge1xuICAgICAgLy8gUmVuYW1lIFwiU3VtbWFyeVwiIHRhYiB0byBcIlBlcnNvbmFsIERldGFpbHNcIlxuICAgICAgLy8gSGFjayB0byBjaGVjayBjb250YWN0IHR5cGUgLSBUaGlzIGZpZWxkIG9ubHkgYXBwZWFycyBmb3IgaW5kaXZpZHVhbHNcbiAgICAgIGlmICgkKCcuY3JtLWNvbnRhY3Qtam9iX3RpdGxlJywgJy5jcm0tc3VtbWFyeS1jb250YWN0aW5mby1ibG9jaycpLmxlbmd0aCkge1xuICAgICAgICAkKCcuY3JtLWNvbnRhY3QtdGFicy1saXN0ICN0YWJfc3VtbWFyeSBhJywgZS50YXJnZXQpLnRleHQoJ1BlcnNvbmFsIERldGFpbHMnKTtcbiAgICAgIH1cblxuICAgICAgYWRkR292ZXJubWVudElkRmllbGQoZS50YXJnZXQpO1xuICAgICAgbWlzY0NvbnRhY3RQYWdlQ2hhbmdlcyhlLnRhcmdldCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFtZW5kcyB0aGUgdmFjYW5jeSBmb3JtXG4gICAqL1xuICBmdW5jdGlvbiBhbWVuZFZhY2FuY3lGb3JtICgpIHtcbiAgICBpZiAoJCgnLkNSTV9IUlJlY3J1aXRtZW50X0Zvcm1fSFJWYWNhbmN5JykubGVuZ3RoID09PSAxKSB7XG4gICAgICBsaW5rTGFiZWxUb0RhdGVwaWNrZXJJbnB1dCgkKCdsYWJlbFtmb3I9XCJzdGFydF9kYXRlXCJdJykucGFyZW50cygndHInKSk7XG4gICAgICBsaW5rTGFiZWxUb0RhdGVwaWNrZXJJbnB1dCgkKCdsYWJlbFtmb3I9XCJlbmRfZGF0ZVwiXScpLnBhcmVudHMoJ3RyJykpO1xuXG4gICAgICAvLyBBZGQgYSBjbGFzcyB0byBpZGVudGlmeSB0aGUgZm9ybSAnTmV3IFZhY2FuY3kgVGVtcGxhdGUnXG4gICAgICBpZiAoJCgnW25hbWU9XCJlbnRyeVVSTFwiXScpLnZhbCgpLmluZGV4T2YoJzt0ZW1wbGF0ZT0xJykgPiAtMSkge1xuICAgICAgICAkKCQoJy5DUk1fSFJSZWNydWl0bWVudF9Gb3JtX0hSVmFjYW5jeSB0Ym9keScpLmdldCgwKSkuYWRkQ2xhc3MoJ0NSTV9IUlJlY3J1aXRtZW50X0Zvcm1fSFJWYWNhbmN5X1RlbXBsYXRlJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGxpZXMgbWlzY2VsbGFuZW91cyBVSSBjaGFuZ2VzXG4gICAqL1xuICBmdW5jdGlvbiBhcHBseU1pc2NDaGFuZ2VzICgpIHtcbiAgICAkKCcjYWN0aXZpdHlDdXN0b21EYXRhJykuYXR0cignY29sc3BhbicsIDMpO1xuICAgICQoJyNjcm0tYWN0aXZpdHktdmlldy10YWJsZSAuY3JtLWNhc2UtYWN0aXZpdHktdmlldy1DbGllbnQgLmxhYmVsJykuaHRtbCgnQ29udGFjdCcpO1xuICAgICQoJ3NwYW4uY3JtLWZyb3plbi1maWVsZCcsICcuY3JtLXByb2ZpbGUtbmFtZS1ocmlkZW50X3RhYicpLmNsb3Nlc3QoJ2RpdicpLnBhcmVudCgnZGl2JykuaGlkZSgpO1xuXG4gICAgJCgnLmNybS1hY2NvcmRpb24taGVhZGVyLmNybS1tYXN0ZXItYWNjb3JkaW9uLWhlYWRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGlzdGluZy1ib3gnKSwgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICBQcy5pbml0aWFsaXplKGVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIDApO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoYW5nZXMgb2Ygc29yY2UgaGVscCB0ZXh0XG4gICAqL1xuICBmdW5jdGlvbiBjaGFuZ2VDb250YWN0U291cmNlRmllbGRIZWxwVGV4dCAoKSB7XG4gICAgJCgnSU5QVVQjY29udGFjdF9zb3VyY2UnKS5wYXJlbnQoJ3RkJykuY2hpbGRyZW4oJ2EnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAkKCcjY3JtLW5vdGlmaWNhdGlvbi1jb250YWluZXIgLmNybS1oZWxwIC5ub3RpZnktY29udGVudCcpLnJlbW92ZSgpO1xuXG4gICAgICBpZiAoJCgnI2NybS1ub3RpZmljYXRpb24tY29udGFpbmVyIC5jcm0taGVscCBwJykubGVuZ3RoKSB7XG4gICAgICAgICQoJyNjcm0tbm90aWZpY2F0aW9uLWNvbnRhaW5lciAuY3JtLWhlbHAgcCcpLnJlbW92ZSgpO1xuICAgICAgfVxuXG4gICAgICAkKCcjY3JtLW5vdGlmaWNhdGlvbi1jb250YWluZXIgLmNybS1oZWxwJykuYXBwZW5kKCc8cD5Tb3VyY2UgaXMgYSB1c2VmdWwgZmllbGQgd2hlcmUgZGF0YSBoYXMgYmVlbiBtaWdyYXRlZCB0byBDaXZpSFIgZnJvbSBvbmUgb3IgYSBudW1iZXIgb2Ygb3RoZXIgbGVnYWN5IHN5c3RlbXMuIFRoZSBTb3VyY2UgZmllbGQgd2lsbCBpbmRpY2F0ZSB3aGljaCBsZWdhY3kgc3lzdGVtIHRoZSBjb250YWN0IGhhcyBjb21lIGZyb20uPC9wPicpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSBvcmlnaW5hbCBsaW5rIHRvIHRoZSBob21lcGFnZSwgY2hhbmdlcyB0aGUgdGV4dCwgd3JhcHMgaXQgaW4gYVxuICAgKiBgbWVudW1haW4tbGFiZWxgIGVsZW1lbnQgYW5kIHByZXBlbmRzIGludGVybmFsbHkgdGhlIGdpdmVuIGFwcCBsb2dvXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSAkbWVudUl0ZW0gVGhlIGNvbnRleHQgd2hlcmUgdG8gZmluZCB0aGUgbGlua1xuICAgKiBAcGFyYW0ge29iamVjdH0gJGFwcExvZ29cbiAgICogQHJldHVybiB0aGUgY3VzdG9taXplZCBob21lIGxpbmtcbiAgICovXG4gIGZ1bmN0aW9uIGN1c3RvbWl6ZUhvbWVMaW5rSW5Mb2dvTWVudUl0ZW0gKCRtZW51SXRlbSwgJGFwcExvZ28pIHtcbiAgICB2YXIgJGhvbWVMaW5rID0gJCgnbGkgPiBhJywgJG1lbnVJdGVtKS5maXJzdCgpO1xuXG4gICAgcmV0dXJuICRob21lTGlua1xuICAgICAgLnRleHQoJ0hvbWUnKVxuICAgICAgLndyYXBJbm5lcignPHNwYW4gY2xhc3M9XCJtZW51bWFpbi1sYWJlbFwiPicpXG4gICAgICAucHJlcGVuZCgkYXBwTG9nbyk7XG4gIH1cblxuICAvKipcbiAgICogSW5qZWN0cyB0aGUgZ2l2ZW4gbWFya3VwIGluIGEgbWVudSB3cmFwcGVyIHdpdGggdGhlIGdpdmVuIGlkXG4gICAqIGNyZWF0ZWQgdG8gY29udGFpbiBib3RoIHRoZSBvcmlnaW5hbCBtZW51IGFuZCB0aGUgdXNlciBvbmVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lbnVNYXJrdXBcbiAgICogQHBhcmFtIHtzdHJpbmd9IHdyYXBwZXJJZFxuICAgKi9cbiAgZnVuY3Rpb24gaW5qZWN0VXNlck1lbnVJbkFNYWluTWVudVdyYXBwZXIgKG1lbnVNYXJrdXAsIHdyYXBwZXJJZCkge1xuICAgIHZhciAkbWVudU1hcmt1cCA9ICQobWVudU1hcmt1cCk7XG4gICAgdmFyICRtZW51V3JhcHBlciA9ICQoJzxkaXY+Jyk7XG5cbiAgICAkbWVudVdyYXBwZXIuYXR0cignaWQnLCB3cmFwcGVySWQpO1xuICAgICRtZW51V3JhcHBlci5hcHBlbmQoJCgnI2Npdmljcm0tbWVudScpKTtcbiAgICAkbWVudVdyYXBwZXIuYXBwZW5kKCRtZW51TWFya3VwKTtcbiAgICAkbWVudVdyYXBwZXIuaW5zZXJ0QWZ0ZXIoJyNwYWdlJyk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0IGEgRE9NIG5vZGUgYWZ0ZXIgaW5wdXRbdHlwZT1cImZpbGVcIl1cbiAgICogd2l0aCB0aGUgZmlsZW5hbWVcbiAgICovXG4gIGZ1bmN0aW9uIGluc2VydEZpbGUgKCkge1xuICAgIHZhciBmaWxlTmFtZSA9ICQodGhpcylbMF0uZmlsZXNbMF07XG5cbiAgICAkKCcjanMtdXBsb2FkZWQtZmlsZScpLnJlbW92ZSgpO1xuICAgIGlmIChmaWxlTmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAkKHRoaXMpLmFmdGVyKCc8c3BhbiBpZD1cImpzLXVwbG9hZGVkLWZpbGVcIiBjbGFzcz1cInVwbG9hZGVkLWZpbGVcIj4nICsgZmlsZU5hbWUubmFtZSArICcgPHNwYW4gY2xhc3M9XCJ1cGxvYWRlZC1maWxlLWljb24tdHJhc2hcIj48aSBjbGFzcz1cImZhIGZhLXRyYXNoLW9cIj48L2k+IFJlbW92ZTwvc3Bhbj4nKTtcblxuICAgICAgJCgnLnVwbG9hZGVkLWZpbGUtaWNvbi10cmFzaCcpLm9uKCdjbGljaycsIHJlbW92ZUZpbGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgbGFiZWwgJ2ZvcicgYXR0ciB0byB3b3JrcyB3aXRoIHRoZSBkYXRlcGlja2VyXG4gICAqXG4gICAqIEBwYXJhbSAge2pRdWVyeSBvYmplY3R9ICRsaW5lIFtkYXRlcGlja2VyJ3MgbGluZSBwYXJlbnRdXG4gICAqL1xuICBmdW5jdGlvbiBsaW5rTGFiZWxUb0RhdGVwaWNrZXJJbnB1dCAoJGxpbmUpIHtcbiAgICAkbGluZS5maW5kKCdsYWJlbCcpLmF0dHIoJ2ZvcicsICRsaW5lLmZpbmQoJy5jcm0tZm9ybS1kYXRlJykuYXR0cignaWQnKSk7XG4gIH1cblxuICAvKipcbiAgICogTWlzYyBjaGFuZ2VzIHRvIHRoZSBwYWdlIChoaWRpbmcgZWxlbWVudHMsIGluc2VydGluZyBuZXcgb25lcywgZXRjKVxuICAgKi9cbiAgZnVuY3Rpb24gbWlzY0NvbnRhY3RQYWdlQ2hhbmdlcyAodGFyZ2V0KSB7XG4gICAgLy8gSGlkZSBjdXJyZW50IGVtcGxveWVyIGFuZCBqb2IgdGl0bGVcbiAgICAvLyBDb250YWN0IHN1bW1hcnkgc2NyZWVuOlxuICAgICQoJ2Rpdi5jcm0tY29udGFjdC1jdXJyZW50X2VtcGxveWVyLCBkaXYuY3JtLWNvbnRhY3Qtam9iX3RpdGxlJywgJy5jcm0tc3VtbWFyeS1jb250YWN0aW5mby1ibG9jaycpLnBhcmVudCgnZGl2LmNybS1zdW1tYXJ5LXJvdycpLmhpZGUoKTtcbiAgICAvLyBJbmxpbmUgZWRpdCBmb3JtXG4gICAgJCgnZm9ybSNDb250YWN0SW5mbyBpbnB1dCNlbXBsb3llcl9pZCwgZm9ybSNDb250YWN0SW5mbyBpbnB1dCNqb2JfdGl0bGUnLCB0YXJnZXQpLmNsb3Nlc3QoJ2Rpdi5jcm0tc3VtbWFyeS1yb3cnKS5oaWRlKCk7XG4gICAgLy8gQ29udGFjdCBlZGl0IHNjcmVlblxuICAgICQoJ2lucHV0I2VtcGxveWVyX2lkLCBpbnB1dCNqb2JfdGl0bGUnLCAnZm9ybSNDb250YWN0JykucGFyZW50KCd0ZCcpLmhpZGUoKTtcblxuICAgIC8qIENoYW5nZXMgb24gQWRkIEluZGl2aWR1YWwgcGFnZXMgYW5kIFBlcnNvbmFsIGRldGFpbHMgdGFiIGZvciBIUi0zNTggKi9cbiAgICAvLyBNb3ZlIEpvYiBzdW1tYXJ5IHRvIHRvcFxuICAgICQoJy5IUkpvYkNvbnRyYWN0X1N1bW1hcnknLCB0YXJnZXQpLmluc2VydEJlZm9yZSgkKCcuY3JtLXN1bW1hcnktY29udGFjdGluZm8tYmxvY2snKSk7XG4gICAgLy8gY2hhbmdlcyBvZiBlbWFpbCBibG9jaywgcmVtb3ZlIGJ1bGttYWlsIGFuZCBvbmhvbGRcbiAgICAkKCdkaXYuZW1haWwtc2lnbmF0dXJlLCB0ZCNFbWFpbC1CdWxrbWFpbC1odG1sJywgJ2Zvcm0jQ29udGFjdCcpLmhpZGUoKTtcbiAgICAkKCcjRW1haWwtUHJpbWFyeScsICdmb3JtI0NvbnRhY3QnKS5wcmV2KCd0ZCcpLnByZXYoJ3RkJykuaGlkZSgpO1xuICAgICQoJ3RkI0VtYWlsLUJ1bGttYWlsLWh0bWwsICNFbWFpbC1QcmltYXJ5JywgJ2Zvcm0jQ29udGFjdCcpLnByZXYoJ3RkJykuaGlkZSgpO1xuXG4gICAgLy8gc2hpZnQgZGVtb2dyYXBoaWMgYWJvdmUgZXh0ZW5kZWQgZGVtb2dyYXBoaWNcbiAgICAkKCcuY3JtLWRlbW9ncmFwaGljcy1hY2NvcmRpb24nLCAnZm9ybSNDb250YWN0JykuaW5zZXJ0QWZ0ZXIoJCgnLmNybS1jb250YWN0RGV0YWlscy1hY2NvcmRpb24nKSk7XG5cbiAgICBpZiAoJCgndHIjUGhvbmVfQmxvY2tfMicsICdmb3JtI0NvbnRhY3QnKS5sZW5ndGggPCAxKSB7XG4gICAgICAkKCcjYWRkUGhvbmUnKS5jbGljaygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlICNqcy11cGxvYWRlZC1maWxlIERJViBhbmRcbiAgICogY2xlYW4gaW5wdXRbdHlwZT1cImZpbGVcIl0gdmFsdWVcbiAgICovXG4gIGZ1bmN0aW9uIHJlbW92ZUZpbGUgKCkge1xuICAgIHZhciAkaW5wdXQgPSAkKCcjanMtdXBsb2FkZWQtZmlsZScpLnBhcmVudCgpLmZpbmQoJ2lucHV0W3R5cGU9XCJmaWxlXCJdJyk7XG5cbiAgICAkKCcjanMtdXBsb2FkZWQtZmlsZScpLnJlbW92ZSgpO1xuICAgICRpbnB1dC52YWwoJycpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vdmVzIHRoZSBnaXZlbiBob21lIGxpbmsgcmlnaHQgdW5kZXIgdGhlIG1lbnUgaXRlbSBhbmQgZ2V0cyByaWRcbiAgICogb2YgdGhlIG9yaWdpbmFsIHN1YiBtZW51XG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSAkbWVudUl0ZW0gVGhlIGNvbnRleHQgd2hlcmUgdG8gZmluZCB0aGUgbGlua1xuICAgKiBAcGFyYW0ge29iamVjdH0gJGhvbWVMaW5rXG4gICAqL1xuICBmdW5jdGlvbiByZW1vdmVMb2dvU3ViTWVudUFuZEtlZXBPbmx5SG9tZUxpbmsgKCRtZW51SXRlbSwgJGhvbWVMaW5rKSB7XG4gICAgJG1lbnVJdGVtXG4gICAgICAub2ZmKCkgLy8gcmVtb3ZlcyBhbnkgaGFuZGxlciB0aGF0IHRoZSBvcmlnaW5hbCBpdGVtIGhhZFxuICAgICAgLmZpbmQoJyNjaXZpY3JtLWhvbWUnKVxuICAgICAgLmJlZm9yZSgkaG9tZUxpbmspXG4gICAgICAucmVtb3ZlKCk7XG4gIH1cblxuICAvKipcbiAgICogU3dhcHMgdGhlIENpdmlDUk0gbG9nbyB3aXRoIHRoZSBDaXZpSFIgbG9nb1xuICAgKiBhbmQgd3JhcHMgaXQgaW4gYSBgbWVudW1haW4taWNvbmAgZWxlbWVudFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gJG1lbnVJdGVtIFRoZSBjb250ZXh0IHdoZXJlIHRvIGZpbmQgdGhlIGxvZ29cbiAgICogQHJldHVybiB0aGUgd3JhcHBlciBvZiB0aGUgbG9nb1xuICAgKi9cbiAgZnVuY3Rpb24gc3dhcEFuZFdyYXBBcHBMb2dvICgkbWVudUl0ZW0pIHtcbiAgICB2YXIgJGFwcExvZ28gPSAkKCcuY3JtLWxvZ28tc20nLCAkbWVudUl0ZW0pO1xuXG4gICAgcmV0dXJuICRhcHBMb2dvXG4gICAgICAuYWRkQ2xhc3MoJ2Nocl9sb2dvIGNocl9sb2dvLS1kZWZhdWx0LWNvbG9yJylcbiAgICAgIC5yZW1vdmVDbGFzcygnY3JtLWxvZ28tc20nKVxuICAgICAgLndyYXAoJzxzcGFuIGNsYXNzPVwibWVudW1haW4taWNvblwiPicpXG4gICAgICAucGFyZW50KCk7XG4gIH1cblxuICAvKipcbiAgICogQ2l2aUNSTSBieSBkZWZhdWx0IGFwcGxpZXMgb24gaG92ZXIgdGhlIC5hY3RpdmV0YXJnZXQgY2xhc3NcbiAgICogb25seSB0byBtYWluIG1lbnUgaXRlbXMgd2l0aCBhIHN1Ym1lbnVcbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbnMgbWFrZXMgc3VyZSB0aGF0IGFueSBpdGVtIGdldHMgdGhlIGNsYXNzIGFwcGxpZWQsXG4gICAqIGV2ZW4gdGhvc2Ugd2l0aCBqdXN0IGEgZGlyZWN0IGxpbmtcbiAgICovXG4gIGZ1bmN0aW9uIHRvZ2dsZUFjdGl2ZUNsYXNzT25Ib3Zlck9uQW55TWFpbk1lbnVJdGVtICgpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gJ2FjdGl2ZXRhcmdldCc7XG5cbiAgICAkKCcubWVudW1haW4nKS5ub3QoJy5jcm0tU2VsZl9TZXJ2aWNlX1BvcnRhbCcpLmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBhcnJvdyBmb3IgbWVudSBpdGVtcyB3aXRoIHN1Yi1pdGVtcywgYW5kIHJlcGxhY2VzIGl0XG4gICAqIHdpdGggYSBmb250IGF3ZXNvbWUgY2FyZXRcbiAgICovXG4gIGZ1bmN0aW9uIHVzZUZvbnRBd2Vzb21lQXJyb3dzSW5TdWJNZW51SXRlbXMgKCkge1xuICAgICQoJyNyb290LW1lbnUtZGl2IC5tZW51LWl0ZW0tYXJyb3cnKS5lYWNoKGZ1bmN0aW9uICgkZWxlbWVudCkge1xuICAgICAgdmFyICRhcnJvdyA9ICQodGhpcyk7XG5cbiAgICAgICRhcnJvdy5iZWZvcmUoJzxpIGNsYXNzPVwiZmEgZmEtY2FyZXQtcmlnaHQgbWVudS1pdGVtLWFycm93XCI+PC9pPicpO1xuICAgICAgJGFycm93LnJlbW92ZSgpO1xuICAgIH0pO1xuICB9XG59KENSTS4kLCBDUk0uXykpO1xuIiwiKGZ1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgdmFyIE11dGF0aW9uT2JzZXJ2ZXIgPSB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB8fCB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlciB8fCB3aW5kb3cuTW96TXV0YXRpb25PYnNlcnZlcjtcblxuICAvKlxuICBUaGlzIHBsdWdpbiBjcmVhdGVzIE11dGF0aW9uT2JzZXJ2ZXIgd2hpY2ggbGlzdGVucyB0byBhbGwgY2hhbmdlcyB0byBET00gTm9kZS5cbiAgSWYgY2hhbmdlIGhhcyBiZWVuIGRvbmUgdG8gaXQncyBhdHRyaWJ1dGVzIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkLlxuXG4gIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gdG8gYmUgY2FsbGVkIHdoZW4gYXR0cmlidXRlcyBjaGFuZ2VcbiAgQHJldHVybnMge0FycmF5fSAtIGxpc3Qgb2YgYWxsIG9ic2VydmVkIGVsZW1lbnRzXG4gICovXG4gICQuZm4uYXR0cmNoYW5nZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIGlmIChNdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgc3VidHJlZTogZmFsc2UsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHRydWVcbiAgICAgIH07XG5cbiAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcbiAgICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBjYWxsYmFjay5jYWxsKGUudGFyZ2V0LCBlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUodGhpcywgb3B0aW9ucyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKENSTS4kKTtcbiIsIi8qIGdsb2JhbHMgQ1JNICovXG5cbi8qXG5QcmV2ZW50IFBvcHVwcyB0byBvdmVyZmxvdyB0YWJsZXMuXG4qL1xuKGZ1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgdmFyICRib2R5ID0gJCgnYm9keScpO1xuXG4gICRib2R5Lm9uKCdjbGljaycsICcuYnRuLXNsaWRlJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciAkcG9wdXBDbG9uZTtcbiAgICB2YXIgJGJ1dHRvbiA9ICQodGhpcyk7XG4gICAgdmFyICRwb3B1cCA9ICRidXR0b24uY2hpbGRyZW4oJ3VsLnBhbmVsJyk7XG5cbiAgICAoZnVuY3Rpb24gaW5pdCAoKSB7XG4gICAgICBjbG9zZVBvcHVwUGFuZWxzKCk7XG4gICAgICBjcmVhdGVQb3B1cENsb25lKCk7XG4gICAgICBvcGVuUG9wdXBDbG9uZSgpO1xuICAgICAgbWFwQ2xvbmVDbGlja0V2ZW50c1RvT3JpZ2luKCk7XG4gICAgICBsaXN0ZW5Ub01vdXNlT3V0RXZlbnQoKTtcbiAgICB9KSgpO1xuXG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBhbnkgcG9wdXAgcGFuZWwgdGhhdCBpcyBjdXJyZW50bHkgb3BlbiBhbmQgcmVtb3ZlcyB0aGVcbiAgICAgKiBgLmNpdmloci1wb3B1cC1vcGVuYCBjbGFzcyBmcm9tIHRoZSBib2R5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsb3NlUG9wdXBQYW5lbHMgKCkge1xuICAgICAgJCgnLmNpdmloci1wb3B1cCcpLnJlbW92ZSgpO1xuICAgICAgJGJvZHkucmVtb3ZlQ2xhc3MoJ2Npdmloci1wb3B1cC1vcGVuJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoZSBwb3B1cCBlbGVtZW50IGFuZCBhcHBlbmRzIGl0IHRvIHRoZSBkb2N1bWVudCBib2R5LlxuICAgICAqIFRoaXMgcHJldmVudHMgdGhlIHBvcHVwIHRvIGJlIGhpZGRlbiBieSBhbnkgYG92ZXJmbG93OiBoaWRkZW47YCBydWxlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVBvcHVwQ2xvbmUgKCkge1xuICAgICAgJHBvcHVwQ2xvbmUgPSAkcG9wdXAuY2xvbmUodHJ1ZSlcbiAgICAgICAgLmFwcGVuZFRvKCRib2R5KVxuICAgICAgICAuYWRkQ2xhc3MoJ2Npdmloci1wb3B1cCcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3RlbnMgdG8gbW91c2UgZXZlbnRzIGhhcHBlbmluZyBvdXRzaWRlIHRoZSBvZiB0aGUgcGFuZWwgaW4gb3JkZXIgdG9cbiAgICAgKiBjbG9zZSBpdC4gVGhlIHdheSB0byBkZXRlY3RlZCBtb3VzZSBvdXQgaXMgYnkgbGlzdGVuaW5nIHRvIHRoZVxuICAgICAqIC5idG4tc2xpZGUtYWN0aXZlIGNsYXNzIGNoYW5nZSwgd2hpY2ggaXMgYWRkZWQgYW5kIHJlbW92ZWQgYnkgQ2l2aUNSTS5cbiAgICAgKiB0aGUgZGF0YSAqYXR0cmNoYW5nZS1pcy1vbiogaXMgc2V0IHRvIHRydWUgaW4gb3JkZXIgdG8gYXZvaWQgYWRkaW5nXG4gICAgICogbXVsdGlwbGUgbGlzdGVuZXJzIHRvIHRoZSBzYW1lIGVsZW1lbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGlzdGVuVG9Nb3VzZU91dEV2ZW50ICgpIHtcbiAgICAgIC8vIElmIEF0dHJDaGFuZ2UgZXZlbnQgaXMgYWxyZWFkeSBsaXN0ZW5lZCwgdGhlbiBza2lwOlxuICAgICAgaWYgKCRidXR0b24uZGF0YSgnYXR0cmNoYW5nZS1pcy1vbicpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgJGJ1dHRvbi5kYXRhKCdhdHRyY2hhbmdlLWlzLW9uJywgdHJ1ZSk7XG4gICAgICAkYnV0dG9uLmF0dHJjaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBJZiBidXR0b24gaXMgYWxyZWFkeSBvcGVuLCB0aGVuIHNraXA6XG4gICAgICAgIGlmICgkYnV0dG9uLmhhc0NsYXNzKCdidG4tc2xpZGUtYWN0aXZlJykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjbG9zZVBvcHVwUGFuZWxzKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXBzIGNsaWNrIGV2ZW50cyBvbiB0aGUgcG9wdXAgb3B0aW9ucyBiYWNrIHRvIHRoZWlyIG9yaWdpbmFsIHNvdXJjZS5cbiAgICAgKiBUaGlzIGlzIGRvbmUgYmVjYXVzZSBwb3B1cCBhY3Rpb25zIGFyZSBleGVjdXRlZCBhcyBkZWxlZ2F0ZWQgZXZlbnRzIGFuZFxuICAgICAqIHRoZSBsaXN0ZW5lciBpcyBub3QgdGhlICpib2R5KiBlbGVtZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcENsb25lQ2xpY2tFdmVudHNUb09yaWdpbiAoKSB7XG4gICAgICAkcG9wdXBDbG9uZS5maW5kKCdhJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYWN0aW9uSW5kZXggPSAkKHRoaXMpLnBhcmVudCgpLmluZGV4KCk7XG5cbiAgICAgICAgJHBvcHVwLmZpbmQoJ2xpOm50aCgnICsgYWN0aW9uSW5kZXggKyAnKSBhJykuY2xpY2soKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBwb3B1cCBwYW5lbCBjbG9uZVxuICAgICAqIGFuZCBhZGRzIHRoZSAuY2l2aWhyLXBvcHVwLW9wZW4gY2xhc3MgdG8gdGhlIGJvZHlcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvcGVuUG9wdXBDbG9uZSAoKSB7XG4gICAgICB2YXIgYnV0dG9uT2Zmc2V0ID0gJGJ1dHRvbi5vZmZzZXQoKTtcblxuICAgICAgJHBvcHVwQ2xvbmUuY3NzKHtcbiAgICAgICAgbGVmdDogK2J1dHRvbk9mZnNldC5sZWZ0IC0gKCRwb3B1cENsb25lLndpZHRoKCkgLSAkYnV0dG9uLm91dGVyV2lkdGgoKSksXG4gICAgICAgIHRvcDogK2J1dHRvbk9mZnNldC50b3AgKyAkYnV0dG9uLm91dGVySGVpZ2h0KClcbiAgICAgIH0pO1xuICAgICAgJHBvcHVwQ2xvbmUuc2hvdygpO1xuICAgICAgJGJvZHkuYWRkQ2xhc3MoJ2Npdmloci1wb3B1cC1vcGVuJyk7XG4gICAgfVxuICB9KTtcbn0pKENSTS4kKTtcbiJdfQ==
