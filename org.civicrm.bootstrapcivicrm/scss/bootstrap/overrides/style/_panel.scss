.panel {
  @include box-shadow(none);

  border: none;
  margin-bottom: $grid-gutter-width;
}

.panel-body {
  background: $crm-white;

  // Avoid extra spacing due to margin bottom of last element
  > *:last-child {
    margin-bottom: 0;

    // A (temporary?) solution to remove extra spacing in a
    // panel containing an horizontal form
    &.form-horizontal {

      > .row:last-child {

        .form-group {
          margin-bottom: 0;
        }
      }
    }
  }
}

.panel-body-small {
  padding: $panel-heading-padding;
}

.panel-heading {
  border: none;
}

.panel-subheading {
  padding: $crm-panel-subheading-padding;
}

.panel-subtitle {
  color: inherit;
  font-size: $font-size-h5;
  font-weight: $crm-font-weight-h5;
  line-height: $headings-line-height;
  margin: 0;
}

.panel-title {
  font-size: $font-size-h2;
  font-weight: $crm-font-weight-h2;
  line-height: $headings-line-height;

  > [data-toggle="collapse"] {

    &:before {
      @include fa-icon();
      color: inherit;
      content: $fa-var-angle-down;
      font-size: $font-size-h2;
    }

    &.collapsed:before {
      content: $fa-var-angle-right;
    }
  }
}

.panel-title-sm {
  font-size: $font-size-h3;
  font-weight: $crm-font-weight-h3;
}


.panel-default {
  @include box-shadow($box-shadow);

  > .panel-body {
    border-top: 1px solid $crm-dark-grayblue;
  }

  > .panel-heading {

    .btn-group-sm {
      margin: -13px 0 -10px 0;

      // TO DO: too much nesting, need to fix this
      > .btn {
        padding-left: 20px;
        padding-right: 20px;
      }
    }
  }

  > .panel-subheading {
    background: $panel-default-heading-bg;
    color: $panel-default-text;
    border-top: 1px solid $gray-light;
  }

  > .table,
  > .table-responsive > .table,
  > .panel-collapse > .table {
    border-top: 1px solid $crm-dark-grayblue;
  }
}

// Contextual variations
.panel-primary {

  .panel-subheading {
    background: $panel-primary-heading-bg;
    color: $panel-primary-text;
    border-top: 1px solid $panel-info-border;

    @include shadow-mask($panel-primary-heading-bg, 'top', -11px);
  }
}

.panel-success {

  .panel-subheading {
    background: $panel-success-heading-bg;
    color: $panel-success-text;
    border-top: 1px solid $panel-success-border;

    @include shadow-mask($panel-success-heading-bg, 'top', -11px);
  }
}

.panel-info {

  .panel-subheading {
    background: $panel-info-heading-bg;
    color: $panel-info-text;
    border-top: 1px solid $panel-info-border;

    @include shadow-mask($panel-info-heading-bg, 'top', -11px);
  }
}

.panel-warning {

  .panel-subheading {
    background: $panel-warning-heading-bg;
    color: $panel-warning-text;
    border-top: 1px solid $panel-warning-border;

    @include shadow-mask($panel-warning-heading-bg, 'top', -11px);
  }
}

.panel-danger {

  .panel-subheading {
    background: $panel-danger-heading-bg;
    color: $panel-danger-text;
    border-top: 1px solid $panel-danger-border;

    @include shadow-mask($panel-danger-heading-bg, 'top', -11px);
  }
}

.panel-primary,
.panel-success,
.panel-info,
.panel-warning,
.panel-danger {

  > .panel-body,
  > .panel-footer,
  > .panel-heading,
  > .panel-subheading {
    @include box-shadow($box-shadow);
  }

  > .panel-body {
    @include shadow-mask($crm-white, 'bottom', 0);
  }

  > .panel-footer {
    position: relative;
  }

  &:not(.panel-w-subheading) > .panel-heading,
  &.panel-w-subheading > .panel-subheading {
    @include border-bottom-radius(($panel-border-radius - 1));
    margin-bottom: $crm-panel-heading-margin;
  }
}

// Panel heading with buttons, aligned vertically
.panel-heading-w-buttons {

  .btn {
    margin: -8px 0 -8px 10px;
  }
}
